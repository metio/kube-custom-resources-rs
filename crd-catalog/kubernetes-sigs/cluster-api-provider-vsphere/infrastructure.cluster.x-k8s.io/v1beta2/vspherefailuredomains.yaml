apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.20.0"
  name: "vspherefailuredomains.infrastructure.cluster.x-k8s.io"
spec:
  group: "infrastructure.cluster.x-k8s.io"
  names:
    categories:
      - "cluster-api"
    kind: "VSphereFailureDomain"
    listKind: "VSphereFailureDomainList"
    plural: "vspherefailuredomains"
    singular: "vspherefailuredomain"
  scope: "Cluster"
  versions:
    - name: "v1beta2"
      schema:
        openAPIV3Schema:
          description: "VSphereFailureDomain is the Schema for the vspherefailuredomains API."
          properties:
            apiVersion:
              description: "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
              type: "string"
            kind:
              description: "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
              type: "string"
            metadata:
              type: "object"
            spec:
              description: "spec is the desired state of VSphereFailureDomain."
              properties:
                region:
                  description: "region defines the name and type of a region"
                  properties:
                    name:
                      description: "name is the name of the tag that represents this failure domain"
                      maxLength: 1024
                      minLength: 1
                      type: "string"
                    tagCategory:
                      description: "tagCategory is the category used for the tag"
                      maxLength: 1024
                      minLength: 1
                      type: "string"
                    type:
                      description: "type is the type of failure domain, the current values are \"Datacenter\", \"ComputeCluster\" and \"HostGroup\""
                      enum:
                        - "Datacenter"
                        - "ComputeCluster"
                        - "HostGroup"
                      type: "string"
                  required:
                    - "name"
                    - "tagCategory"
                    - "type"
                  type: "object"
                topology:
                  description: "topology describes a given failure domain using vSphere constructs"
                  properties:
                    computeCluster:
                      description: "computeCluster as the failure domain"
                      maxLength: 2048
                      minLength: 1
                      type: "string"
                    datacenter:
                      description: "datacenter as the failure domain."
                      maxLength: 2048
                      minLength: 1
                      type: "string"
                    datastore:
                      description: "datastore is the name or inventory path of the datastore in which the\nvirtual machine is created/located."
                      maxLength: 2048
                      minLength: 1
                      type: "string"
                    hosts:
                      description: "hosts has information required for placement of machines on VSphere hosts."
                      properties:
                        hostGroupName:
                          description: "hostGroupName is the name of the Host group"
                          maxLength: 2048
                          minLength: 1
                          type: "string"
                        vmGroupName:
                          description: "vmGroupName is the name of the VM group"
                          maxLength: 2048
                          minLength: 1
                          type: "string"
                      required:
                        - "hostGroupName"
                        - "vmGroupName"
                      type: "object"
                    networkConfigurations:
                      description: "networkConfigurations is a list of network configurations within this failure domain."
                      items:
                        description: "NetworkConfiguration defines a network configuration that should be used when consuming\na failure domain."
                        properties:
                          addressesFromPools:
                            description: "addressesFromPools is a list of IPAddressPools that should be assigned\nto IPAddressClaims. The machine's cloud-init metadata will be populated\nwith IPAddresses fulfilled by an IPAM provider."
                            items:
                              description: "IPPoolReference is a reference to an IPPool."
                              properties:
                                apiGroup:
                                  description: "apiGroup of the IPPool.\napiGroup must be fully qualified domain name."
                                  maxLength: 253
                                  minLength: 1
                                  pattern: "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
                                  type: "string"
                                kind:
                                  description: "kind of the IPPool.\nkind must consist of alphanumeric characters or '-', start with an alphabetic character, and end with an alphanumeric character."
                                  maxLength: 63
                                  minLength: 1
                                  pattern: "^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
                                  type: "string"
                                name:
                                  description: "name of the IPPool.\nname must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character."
                                  maxLength: 253
                                  minLength: 1
                                  pattern: "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
                                  type: "string"
                              required:
                                - "apiGroup"
                                - "kind"
                                - "name"
                              type: "object"
                            maxItems: 128
                            type: "array"
                            x-kubernetes-list-type: "atomic"
                          dhcp4:
                            description: "dhcp4 is a flag that indicates whether or not to use DHCP for IPv4."
                            type: "boolean"
                          dhcp4Overrides:
                            description: "dhcp4Overrides allows for the control over several DHCP behaviors.\nOverrides will only be applied when the corresponding DHCP flag is set.\nOnly configured values will be sent, omitted values will default to\ndistribution defaults.\nDependent on support in the network stack for your distribution.\nFor more information see the netplan reference (https://netplan.io/reference#dhcp-overrides)"
                            properties:
                              hostname:
                                description: "hostname is the name which will be sent to the DHCP server instead of\nthe machine's hostname."
                                maxLength: 1024
                                type: "string"
                              routeMetric:
                                description: "routeMetric is used to prioritize routes for devices. A lower metric for\nan interface will have a higher priority."
                                format: "int32"
                                minimum: 0.0
                                type: "integer"
                              sendHostname:
                                description: "sendHostname when `true`, the hostname of the machine will be sent to the\nDHCP server."
                                type: "boolean"
                              useDNS:
                                description: "useDNS when `true`, the DNS servers in the DHCP server will be used and\ntake precedence."
                                type: "boolean"
                              useDomains:
                                description: "useDomains can take the values `true`, `false`, or `route`. When `true`,\nthe domain name from the DHCP server will be used as the DNS search\ndomain for this device. When `route`, the domain name from the DHCP\nresponse will be used for routing DNS only, not for searching."
                                maxLength: 128
                                type: "string"
                              useHostname:
                                description: "useHostname when `true`, the hostname from the DHCP server will be set\nas the transient hostname of the machine."
                                type: "boolean"
                              useMTU:
                                description: "useMTU when `true`, the MTU from the DHCP server will be set as the\nMTU of the device."
                                type: "boolean"
                              useNTP:
                                description: "useNTP when `true`, the NTP servers from the DHCP server will be used\nby systemd-timesyncd and take precedence."
                                type: "boolean"
                              useRoutes:
                                description: "useRoutes when `true`, the routes from the DHCP server will be installed\nin the routing table."
                                maxLength: 128
                                type: "string"
                            type: "object"
                          dhcp6:
                            description: "dhcp6 is a flag that indicates whether or not to use DHCP for IPv6."
                            type: "boolean"
                          dhcp6Overrides:
                            description: "dhcp6Overrides allows for the control over several DHCP behaviors.\nOverrides will only be applied when the corresponding DHCP flag is set.\nOnly configured values will be sent, omitted values will default to\ndistribution defaults.\nDependent on support in the network stack for your distribution.\nFor more information see the netplan reference (https://netplan.io/reference#dhcp-overrides)"
                            properties:
                              hostname:
                                description: "hostname is the name which will be sent to the DHCP server instead of\nthe machine's hostname."
                                maxLength: 1024
                                type: "string"
                              routeMetric:
                                description: "routeMetric is used to prioritize routes for devices. A lower metric for\nan interface will have a higher priority."
                                format: "int32"
                                minimum: 0.0
                                type: "integer"
                              sendHostname:
                                description: "sendHostname when `true`, the hostname of the machine will be sent to the\nDHCP server."
                                type: "boolean"
                              useDNS:
                                description: "useDNS when `true`, the DNS servers in the DHCP server will be used and\ntake precedence."
                                type: "boolean"
                              useDomains:
                                description: "useDomains can take the values `true`, `false`, or `route`. When `true`,\nthe domain name from the DHCP server will be used as the DNS search\ndomain for this device. When `route`, the domain name from the DHCP\nresponse will be used for routing DNS only, not for searching."
                                maxLength: 128
                                type: "string"
                              useHostname:
                                description: "useHostname when `true`, the hostname from the DHCP server will be set\nas the transient hostname of the machine."
                                type: "boolean"
                              useMTU:
                                description: "useMTU when `true`, the MTU from the DHCP server will be set as the\nMTU of the device."
                                type: "boolean"
                              useNTP:
                                description: "useNTP when `true`, the NTP servers from the DHCP server will be used\nby systemd-timesyncd and take precedence."
                                type: "boolean"
                              useRoutes:
                                description: "useRoutes when `true`, the routes from the DHCP server will be installed\nin the routing table."
                                maxLength: 128
                                type: "string"
                            type: "object"
                          nameservers:
                            description: "nameservers is a list of IPv4 and/or IPv6 addresses used as DNS\nnameservers.\nPlease note that Linux allows only three nameservers (https://linux.die.net/man/5/resolv.conf)."
                            items:
                              maxLength: 64
                              minLength: 1
                              type: "string"
                            maxItems: 128
                            type: "array"
                            x-kubernetes-list-type: "atomic"
                          networkName:
                            description: "networkName is the network name for this machine's VM."
                            maxLength: 2048
                            minLength: 1
                            type: "string"
                          searchDomains:
                            description: "searchDomains is a list of search domains used when resolving IP\naddresses with DNS."
                            items:
                              maxLength: 1024
                              minLength: 1
                              type: "string"
                            maxItems: 128
                            type: "array"
                            x-kubernetes-list-type: "atomic"
                        required:
                          - "networkName"
                        type: "object"
                      maxItems: 128
                      type: "array"
                      x-kubernetes-list-map-keys:
                        - "networkName"
                      x-kubernetes-list-type: "map"
                    networks:
                      description: "networks is the list of networks within this failure domain"
                      items:
                        maxLength: 2048
                        minLength: 1
                        type: "string"
                      maxItems: 128
                      type: "array"
                      x-kubernetes-list-type: "atomic"
                  required:
                    - "datacenter"
                  type: "object"
                zone:
                  description: "zone defines the name and type of a zone"
                  properties:
                    name:
                      description: "name is the name of the tag that represents this failure domain"
                      maxLength: 1024
                      minLength: 1
                      type: "string"
                    tagCategory:
                      description: "tagCategory is the category used for the tag"
                      maxLength: 1024
                      minLength: 1
                      type: "string"
                    type:
                      description: "type is the type of failure domain, the current values are \"Datacenter\", \"ComputeCluster\" and \"HostGroup\""
                      enum:
                        - "Datacenter"
                        - "ComputeCluster"
                        - "HostGroup"
                      type: "string"
                  required:
                    - "name"
                    - "tagCategory"
                    - "type"
                  type: "object"
              required:
                - "region"
                - "topology"
                - "zone"
              type: "object"
          required:
            - "spec"
          type: "object"
      served: true
      storage: true
