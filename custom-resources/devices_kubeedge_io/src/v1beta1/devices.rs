// WARNING: generated by kopium - manual changes will be overwritten
// kopium command: kopium --docs --derive=Default --derive=PartialEq --smart-derive-elision --filename crd-catalog/kubeedge/kubeedge/devices.kubeedge.io/v1beta1/devices.yaml
// kopium version: 0.22.5

#[allow(unused_imports)]
mod prelude {
    pub use kube::CustomResource;
    pub use serde::{Serialize, Deserialize};
    pub use std::collections::BTreeMap;
}
use self::prelude::*;

/// DeviceSpec represents a single device instance.
#[derive(CustomResource, Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
#[kube(group = "devices.kubeedge.io", version = "v1beta1", kind = "Device", plural = "devices")]
#[kube(namespaced)]
#[kube(status = "DeviceStatus")]
#[kube(schema = "disabled")]
#[kube(derive="Default")]
#[kube(derive="PartialEq")]
pub struct DeviceSpec {
    /// Required: DeviceModelRef is reference to the device model used as a template
    /// to create the device instance.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "deviceModelRef")]
    pub device_model_ref: Option<DeviceDeviceModelRef>,
    /// List of methods of device.
    /// methods list item must be unique by method.Name.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub methods: Option<Vec<DeviceMethods>>,
    /// NodeName is a request to schedule this device onto a specific node. If it is non-empty,
    /// the scheduler simply schedules this device onto that node, assuming that it fits
    /// resource requirements.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "nodeName")]
    pub node_name: Option<String>,
    /// List of properties which describe the device properties.
    /// properties list item must be unique by properties.Name.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub properties: Option<Vec<DeviceProperties>>,
    /// Required: The protocol configuration used to connect to the device.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub protocol: Option<DeviceProtocol>,
    /// StateReport represents the configuration of state reporting for a device.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "stateReport")]
    pub state_report: Option<DeviceStateReport>,
}

/// Required: DeviceModelRef is reference to the device model used as a template
/// to create the device instance.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceDeviceModelRef {
    /// Name of the referent.
    /// This field is effectively required, but due to backwards compatibility is
    /// allowed to be empty. Instances of this type with an empty value here are
    /// almost certainly wrong.
    /// More info: <https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names>
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
}

/// DeviceMethod describes the specifics all the methods of the device.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceMethods {
    /// Define the description of device method.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub description: Option<String>,
    /// Required: The device method name to be accessed. It must be unique.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    /// PropertyNames are list of device properties that device methods can control.
    /// Required: A device method can control multiple device properties.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "propertyNames")]
    pub property_names: Option<Vec<String>>,
}

/// DeviceProperty describes the specifics all the properties of the device.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceProperties {
    /// Define how frequent mapper will collect from device.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "collectCycle")]
    pub collect_cycle: Option<i64>,
    /// The desired property value.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub desired: Option<DevicePropertiesDesired>,
    /// Required: The device property name to be accessed. It must be unique.
    /// Note: If you need to use the built-in stream data processing function, you need to define Name as saveFrame or saveVideo
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    /// PushMethod represents the protocol used to push data,
    /// please ensure that the mapper can access the destination address.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "pushMethod")]
    pub push_method: Option<DevicePropertiesPushMethod>,
    /// Define how frequent mapper will report the value.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportCycle")]
    pub report_cycle: Option<i64>,
    /// whether be reported to the cloud
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportToCloud")]
    pub report_to_cloud: Option<bool>,
    /// Visitors are intended to be consumed by device mappers which connect to devices
    /// and collect data / perform actions on the device.
    /// Required: Protocol relevant config details about the how to access the device property.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub visitors: Option<DevicePropertiesVisitors>,
}

/// The desired property value.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesDesired {
    /// Additional metadata like timestamp when the value was reported etc.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub metadata: Option<BTreeMap<String, String>>,
    /// Required: The value for this property.
    pub value: String,
}

/// PushMethod represents the protocol used to push data,
/// please ensure that the mapper can access the destination address.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethod {
    /// DBMethod represents the method used to push data to database,
    /// please ensure that the mapper can access the destination address.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "dbMethod")]
    pub db_method: Option<DevicePropertiesPushMethodDbMethod>,
    /// HTTP Push method configuration for http
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub http: Option<DevicePropertiesPushMethodHttp>,
    /// MQTT Push method configuration for mqtt
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub mqtt: Option<DevicePropertiesPushMethodMqtt>,
    /// OTEL Push Method configuration for otel
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub otel: Option<DevicePropertiesPushMethodOtel>,
}

/// DBMethod represents the method used to push data to database,
/// please ensure that the mapper can access the destination address.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethod {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "TDEngine")]
    pub td_engine: Option<DevicePropertiesPushMethodDbMethodTdEngine>,
    /// method configuration for database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub influxdb2: Option<DevicePropertiesPushMethodDbMethodInfluxdb2>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub mysql: Option<DevicePropertiesPushMethodDbMethodMysql>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub redis: Option<DevicePropertiesPushMethodDbMethodRedis>,
}

#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodTdEngine {
    /// tdengineClientConfig of tdengine database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "TDEngineClientConfig")]
    pub td_engine_client_config: Option<DevicePropertiesPushMethodDbMethodTdEngineTdEngineClientConfig>,
}

/// tdengineClientConfig of tdengine database
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodTdEngineTdEngineClientConfig {
    /// addr of tdEngine database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub addr: Option<String>,
    /// dbname of tdEngine database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "dbName")]
    pub db_name: Option<String>,
}

/// method configuration for database
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodInfluxdb2 {
    /// Config of influx database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "influxdb2ClientConfig")]
    pub influxdb2_client_config: Option<DevicePropertiesPushMethodDbMethodInfluxdb2Influxdb2ClientConfig>,
    /// config of device data when push to influx database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "influxdb2DataConfig")]
    pub influxdb2_data_config: Option<DevicePropertiesPushMethodDbMethodInfluxdb2Influxdb2DataConfig>,
}

/// Config of influx database
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodInfluxdb2Influxdb2ClientConfig {
    /// Bucket of the user in influx database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub bucket: Option<String>,
    /// Org of the user in influx database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub org: Option<String>,
    /// Url of influx database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub url: Option<String>,
}

/// config of device data when push to influx database
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodInfluxdb2Influxdb2DataConfig {
    /// FieldKey of the user data
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "fieldKey")]
    pub field_key: Option<String>,
    /// Measurement of the user data
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub measurement: Option<String>,
    /// the tag of device data
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub tag: Option<BTreeMap<String, String>>,
}

#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodMysql {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "mysqlClientConfig")]
    pub mysql_client_config: Option<DevicePropertiesPushMethodDbMethodMysqlMysqlClientConfig>,
}

#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodMysqlMysqlClientConfig {
    /// mysql address,like localhost:3306
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub addr: Option<String>,
    /// database name
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub database: Option<String>,
    /// user name
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "userName")]
    pub user_name: Option<String>,
}

#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodRedis {
    /// RedisClientConfig of redis database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "redisClientConfig")]
    pub redis_client_config: Option<DevicePropertiesPushMethodDbMethodRedisRedisClientConfig>,
}

/// RedisClientConfig of redis database
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodDbMethodRedisRedisClientConfig {
    /// Addr of Redis database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub addr: Option<String>,
    /// Db of Redis database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub db: Option<i64>,
    /// MinIdleConns of Redis database
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "minIdleConns")]
    pub min_idle_conns: Option<i64>,
    /// Poolsize of Redis database
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub poolsize: Option<i64>,
}

/// HTTP Push method configuration for http
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodHttp {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "hostName")]
    pub host_name: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub port: Option<i64>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "requestPath")]
    pub request_path: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub timeout: Option<i64>,
}

/// MQTT Push method configuration for mqtt
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodMqtt {
    /// broker address, like mqtt://127.0.0.1:1883
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub address: Option<String>,
    /// qos of mqtt publish param
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub qos: Option<i32>,
    /// Is the message retained
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub retained: Option<bool>,
    /// publish topic for mqtt
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub topic: Option<String>,
}

/// OTEL Push Method configuration for otel
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesPushMethodOtel {
    /// the target endpoint URL the Exporter will connect to, like <https://localhost:4318/v1/metrics>
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "endpointURL")]
    pub endpoint_url: Option<String>,
}

/// Visitors are intended to be consumed by device mappers which connect to devices
/// and collect data / perform actions on the device.
/// Required: Protocol relevant config details about the how to access the device property.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DevicePropertiesVisitors {
    /// Required: The configData of customized protocol
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "configData")]
    pub config_data: Option<BTreeMap<String, serde_json::Value>>,
    /// Required: name of customized protocol
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "protocolName")]
    pub protocol_name: Option<String>,
}

/// Required: The protocol configuration used to connect to the device.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceProtocol {
    /// Any config data
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "configData")]
    pub config_data: Option<BTreeMap<String, serde_json::Value>>,
    /// Unique protocol name
    /// Required.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "protocolName")]
    pub protocol_name: Option<String>,
}

/// StateReport represents the configuration of state reporting for a device.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceStateReport {
    /// Optional: Define how frequent mapper will report the device state.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportCycle")]
    pub report_cycle: Option<i64>,
    /// Optional: whether be reported to the cloud
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportToCloud")]
    pub report_to_cloud: Option<bool>,
}

/// We schedule to extract the status field of Device CRD to a separate CRD DeviceStatus
/// The DeviceStatusOld is kept temporarily to avoid breaking changes during the transition period.
/// After the transition period, DeviceStatusOld and related code will be removed.
/// DeviceStatusOld represents the status of a device instance.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct DeviceStatus {
    /// Optional: Define how frequent mapper will report the device status.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportCycle")]
    pub report_cycle: Option<i64>,
    /// Optional: whether be reported to the cloud
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "reportToCloud")]
    pub report_to_cloud: Option<bool>,
}

