// WARNING: generated by kopium - manual changes will be overwritten
// kopium command: kopium --docs --derive=Default --derive=PartialEq --smart-derive-elision --filename crd-catalog/tinkerbell/cluster-api-provider-tinkerbell/infrastructure.cluster.x-k8s.io/v1beta1/tinkerbellmachinetemplates.yaml
// kopium version: 0.22.5

#[allow(unused_imports)]
mod prelude {
    pub use kube::CustomResource;
    pub use serde::{Serialize, Deserialize};
    pub use std::collections::BTreeMap;
}
use self::prelude::*;

/// TinkerbellMachineTemplateSpec defines the desired state of TinkerbellMachineTemplate.
#[derive(CustomResource, Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
#[kube(group = "infrastructure.cluster.x-k8s.io", version = "v1beta1", kind = "TinkerbellMachineTemplate", plural = "tinkerbellmachinetemplates")]
#[kube(namespaced)]
#[kube(schema = "disabled")]
#[kube(derive="Default")]
#[kube(derive="PartialEq")]
pub struct TinkerbellMachineTemplateSpec {
    /// TinkerbellMachineTemplateResource describes the data needed to create am TinkerbellMachine from a template.
    pub template: TinkerbellMachineTemplateTemplate,
}

/// TinkerbellMachineTemplateResource describes the data needed to create am TinkerbellMachine from a template.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplate {
    /// Spec is the specification of the desired behavior of the machine.
    pub spec: TinkerbellMachineTemplateTemplateSpec,
}

/// Spec is the specification of the desired behavior of the machine.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpec {
    /// BootOptions are options that control the booting of Hardware.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "bootOptions")]
    pub boot_options: Option<TinkerbellMachineTemplateTemplateSpecBootOptions>,
    /// HardwareAffinity allows filtering for hardware.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "hardwareAffinity")]
    pub hardware_affinity: Option<TinkerbellMachineTemplateTemplateSpecHardwareAffinity>,
    /// Those fields are set programmatically, but they cannot be re-constructed from "state of the world", so
    /// we put them in spec instead of status.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "hardwareName")]
    pub hardware_name: Option<String>,
    /// ImageLookupBaseRegistry is the base Registry URL that is used for pulling images,
    /// if not set, the default will be to use ghcr.io/tinkerbell/cluster-api-provider-tinkerbell.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "imageLookupBaseRegistry")]
    pub image_lookup_base_registry: Option<String>,
    /// ImageLookupFormat is the URL naming format to use for machine images when
    /// a machine does not specify. When set, this will be used for all cluster machines
    /// unless a machine specifies a different ImageLookupFormat. Supports substitutions
    /// for {{.BaseRegistry}}, {{.OSDistro}}, {{.OSVersion}} and {{.KubernetesVersion}} with
    /// the basse URL, OS distribution, OS version, and kubernetes version, respectively.
    /// BaseRegistry will be the value in ImageLookupBaseRegistry or ghcr.io/tinkerbell/cluster-api-provider-tinkerbell
    /// (the default), OSDistro will be the value in ImageLookupOSDistro or ubuntu (the default),
    /// OSVersion will be the value in ImageLookupOSVersion or default based on the OSDistro
    /// (if known), and the kubernetes version as defined by the packages produced by
    /// kubernetes/release: v1.13.0, v1.12.5-mybuild.1, or v1.17.3. For example, the default
    /// image format of {{.BaseRegistry}}/{{.OSDistro}}-{{.OSVersion}}:{{.KubernetesVersion}}.gz will
    /// attempt to pull the image from that location. See also: <https://golang.org/pkg/text/template/>
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "imageLookupFormat")]
    pub image_lookup_format: Option<String>,
    /// ImageLookupOSDistro is the name of the OS distro to use when fetching machine images,
    /// if not set it will default to ubuntu.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "imageLookupOSDistro")]
    pub image_lookup_os_distro: Option<String>,
    /// ImageLookupOSVersion is the version of the OS distribution to use when fetching machine
    /// images. If not set it will default based on ImageLookupOSDistro.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "imageLookupOSVersion")]
    pub image_lookup_os_version: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "providerID")]
    pub provider_id: Option<String>,
    /// TemplateOverride overrides the default Tinkerbell template used by CAPT.
    /// You can learn more about Tinkerbell templates here: <https://tinkerbell.org/docs/concepts/templates/>
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "templateOverride")]
    pub template_override: Option<String>,
}

/// BootOptions are options that control the booting of Hardware.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptions {
    /// BootMode is the type of booting that will be done. One of "netboot", "isoboot", or "customboot".
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "bootMode")]
    pub boot_mode: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsBootMode>,
    /// CustombootConfig is the configuration for the "customboot" boot mode.
    /// This allows users to define custom BMC Actions.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "custombootConfig")]
    pub customboot_config: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfig>,
    /// ISOURL is the URL of the ISO that will be one-time booted.
    /// A HardwareRef that contains a spec.BmcRef must be provided.
    /// 
    /// The format of the ISOURL must be <http://$IP:$Port/iso/hook.iso>
    /// The name of the ISO file must have the .iso extension, but the name can be anything.
    /// The $IP and $Port should generally point to the IP and Port of the Smee server
    /// as this is where the ISO patching endpoint lives.
    /// The controller will append the MAC address of the hardware in the ISO URL
    /// right before the iso file name in the URL.
    /// MAC address is then used to retrieve hardware specific information such as
    /// IPAM info, custom kernel cmd line args and populate the worker ID for the tink worker/agent.
    /// For ex. the above format would be replaced to <http://$IP:$Port/iso/<macAddress>/hook.iso>
    /// 
    /// BootMode must be set to "isoboot".
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "isoURL")]
    pub iso_url: Option<String>,
}

/// BootOptions are options that control the booting of Hardware.
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
pub enum TinkerbellMachineTemplateTemplateSpecBootOptionsBootMode {
    #[serde(rename = "netboot")]
    Netboot,
    #[serde(rename = "isoboot")]
    Isoboot,
    #[serde(rename = "iso")]
    Iso,
    #[serde(rename = "customboot")]
    Customboot,
}

/// CustombootConfig is the configuration for the "customboot" boot mode.
/// This allows users to define custom BMC Actions.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfig {
    /// PostActions are the BMC Actions that will be run after all Workflow Actions have completed.
    /// In most cases these Actions should get a Machine into a state where it can be powered off or rebooted and remove any mounted virtual media.
    /// These Actions will be run only if the main Workflow Actions complete successfully.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "postActions")]
    pub post_actions: Option<Vec<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActions>>,
    /// PreparingActions are the BMC Actions that will be run before any Workflow Actions.
    /// In most cases these Actions should get a Machine into a state where a Tink Agent is running.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "preparingActions")]
    pub preparing_actions: Option<Vec<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActions>>,
}

/// Action represents the action to be performed.
/// A single task can only perform one type of action.
/// For example either PowerAction or OneTimeBootDeviceAction.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActions {
    /// BootDevice is the device to set as the first boot device on the Machine.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "bootDevice")]
    pub boot_device: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsBootDevice>,
    /// OneTimeBootDeviceAction represents a baseboard management one time set boot device operation.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "oneTimeBootDeviceAction")]
    pub one_time_boot_device_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsOneTimeBootDeviceAction>,
    /// PowerAction represents a baseboard management power operation.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "powerAction")]
    pub power_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsPowerAction>,
    /// VirtualMediaAction represents a baseboard management virtual media insert/eject.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "virtualMediaAction")]
    pub virtual_media_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsVirtualMediaAction>,
}

/// BootDevice is the device to set as the first boot device on the Machine.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsBootDevice {
    /// Device is the name of the device to set as the first boot device.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub device: Option<String>,
    /// EFIBoot indicates whether the boot device should be set to efiboot mode.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "efiBoot")]
    pub efi_boot: Option<bool>,
    /// Persistent indicates whether the boot device should be set persistently as the first boot device.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub persistent: Option<bool>,
}

/// OneTimeBootDeviceAction represents a baseboard management one time set boot device operation.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsOneTimeBootDeviceAction {
    /// Devices represents the boot devices, in order for setting one time boot.
    /// Currently only the first device in the slice is used to set one time boot.
    pub device: Vec<String>,
    /// EFIBoot instructs the machine to use EFI boot.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "efiBoot")]
    pub efi_boot: Option<bool>,
}

/// Action represents the action to be performed.
/// A single task can only perform one type of action.
/// For example either PowerAction or OneTimeBootDeviceAction.
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
pub enum TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsPowerAction {
    #[serde(rename = "on")]
    On,
    #[serde(rename = "off")]
    Off,
    #[serde(rename = "soft")]
    Soft,
    #[serde(rename = "status")]
    Status,
    #[serde(rename = "cycle")]
    Cycle,
    #[serde(rename = "reset")]
    Reset,
}

/// VirtualMediaAction represents a baseboard management virtual media insert/eject.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPostActionsVirtualMediaAction {
    /// Kind represents the kind of virtual media.
    pub kind: String,
    /// mediaURL represents the URL of the image to be inserted into the virtual media, or empty to eject media.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "mediaURL")]
    pub media_url: Option<String>,
}

/// Action represents the action to be performed.
/// A single task can only perform one type of action.
/// For example either PowerAction or OneTimeBootDeviceAction.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActions {
    /// BootDevice is the device to set as the first boot device on the Machine.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "bootDevice")]
    pub boot_device: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsBootDevice>,
    /// OneTimeBootDeviceAction represents a baseboard management one time set boot device operation.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "oneTimeBootDeviceAction")]
    pub one_time_boot_device_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsOneTimeBootDeviceAction>,
    /// PowerAction represents a baseboard management power operation.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "powerAction")]
    pub power_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsPowerAction>,
    /// VirtualMediaAction represents a baseboard management virtual media insert/eject.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "virtualMediaAction")]
    pub virtual_media_action: Option<TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsVirtualMediaAction>,
}

/// BootDevice is the device to set as the first boot device on the Machine.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsBootDevice {
    /// Device is the name of the device to set as the first boot device.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub device: Option<String>,
    /// EFIBoot indicates whether the boot device should be set to efiboot mode.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "efiBoot")]
    pub efi_boot: Option<bool>,
    /// Persistent indicates whether the boot device should be set persistently as the first boot device.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub persistent: Option<bool>,
}

/// OneTimeBootDeviceAction represents a baseboard management one time set boot device operation.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsOneTimeBootDeviceAction {
    /// Devices represents the boot devices, in order for setting one time boot.
    /// Currently only the first device in the slice is used to set one time boot.
    pub device: Vec<String>,
    /// EFIBoot instructs the machine to use EFI boot.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "efiBoot")]
    pub efi_boot: Option<bool>,
}

/// Action represents the action to be performed.
/// A single task can only perform one type of action.
/// For example either PowerAction or OneTimeBootDeviceAction.
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
pub enum TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsPowerAction {
    #[serde(rename = "on")]
    On,
    #[serde(rename = "off")]
    Off,
    #[serde(rename = "soft")]
    Soft,
    #[serde(rename = "status")]
    Status,
    #[serde(rename = "cycle")]
    Cycle,
    #[serde(rename = "reset")]
    Reset,
}

/// VirtualMediaAction represents a baseboard management virtual media insert/eject.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecBootOptionsCustombootConfigPreparingActionsVirtualMediaAction {
    /// Kind represents the kind of virtual media.
    pub kind: String,
    /// mediaURL represents the URL of the image to be inserted into the virtual media, or empty to eject media.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "mediaURL")]
    pub media_url: Option<String>,
}

/// HardwareAffinity allows filtering for hardware.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinity {
    /// Preferred are the preferred hardware affinity terms. Hardware matching these terms are preferred according to the
    /// weights provided, but are not required.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub preferred: Option<Vec<TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferred>>,
    /// Required are the required hardware affinity terms.  The terms are OR'd together, hardware must match one term to
    /// be considered.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub required: Option<Vec<TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequired>>,
}

/// WeightedHardwareAffinityTerm is a HardwareAffinityTerm with an associated weight.  The weights of all the matched
/// WeightedHardwareAffinityTerm fields are added per-hardware to find the most preferred hardware.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferred {
    /// HardwareAffinityTerm is the term associated with the corresponding weight.
    #[serde(rename = "hardwareAffinityTerm")]
    pub hardware_affinity_term: TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTerm,
    /// Weight associated with matching the corresponding hardwareAffinityTerm, in the range 1-100.
    pub weight: i32,
}

/// HardwareAffinityTerm is the term associated with the corresponding weight.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTerm {
    /// LabelSelector is used to select for particular hardware by label.
    #[serde(rename = "labelSelector")]
    pub label_selector: TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTermLabelSelector,
}

/// LabelSelector is used to select for particular hardware by label.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTermLabelSelector {
    /// matchExpressions is a list of label selector requirements. The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchExpressions")]
    pub match_expressions: Option<Vec<TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTermLabelSelectorMatchExpressions>>,
    /// matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
    /// map is equivalent to an element of matchExpressions, whose key field is "key", the
    /// operator is "In", and the values array contains only "value". The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchLabels")]
    pub match_labels: Option<BTreeMap<String, String>>,
}

/// A label selector requirement is a selector that contains values, a key, and an operator that
/// relates the key and values.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityPreferredHardwareAffinityTermLabelSelectorMatchExpressions {
    /// key is the label key that the selector applies to.
    pub key: String,
    /// operator represents a key's relationship to a set of values.
    /// Valid operators are In, NotIn, Exists and DoesNotExist.
    pub operator: String,
    /// values is an array of string values. If the operator is In or NotIn,
    /// the values array must be non-empty. If the operator is Exists or DoesNotExist,
    /// the values array must be empty. This array is replaced during a strategic
    /// merge patch.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub values: Option<Vec<String>>,
}

/// HardwareAffinityTerm is used to select for a particular existing hardware resource.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequired {
    /// LabelSelector is used to select for particular hardware by label.
    #[serde(rename = "labelSelector")]
    pub label_selector: TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequiredLabelSelector,
}

/// LabelSelector is used to select for particular hardware by label.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequiredLabelSelector {
    /// matchExpressions is a list of label selector requirements. The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchExpressions")]
    pub match_expressions: Option<Vec<TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequiredLabelSelectorMatchExpressions>>,
    /// matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
    /// map is equivalent to an element of matchExpressions, whose key field is "key", the
    /// operator is "In", and the values array contains only "value". The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchLabels")]
    pub match_labels: Option<BTreeMap<String, String>>,
}

/// A label selector requirement is a selector that contains values, a key, and an operator that
/// relates the key and values.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct TinkerbellMachineTemplateTemplateSpecHardwareAffinityRequiredLabelSelectorMatchExpressions {
    /// key is the label key that the selector applies to.
    pub key: String,
    /// operator represents a key's relationship to a set of values.
    /// Valid operators are In, NotIn, Exists and DoesNotExist.
    pub operator: String,
    /// values is an array of string values. If the operator is In or NotIn,
    /// the values array must be non-empty. If the operator is Exists or DoesNotExist,
    /// the values array must be empty. This array is replaced during a strategic
    /// merge patch.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub values: Option<Vec<String>>,
}

