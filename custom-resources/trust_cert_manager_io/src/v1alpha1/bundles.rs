// WARNING: generated by kopium - manual changes will be overwritten
// kopium command: kopium --docs --derive=Default --derive=PartialEq --smart-derive-elision --filename crd-catalog/cert-manager/trust-manager/trust.cert-manager.io/v1alpha1/bundles.yaml
// kopium version: 0.22.5

#[allow(unused_imports)]
mod prelude {
    pub use kube::CustomResource;
    pub use serde::{Serialize, Deserialize};
    pub use std::collections::BTreeMap;
    pub use k8s_openapi::apimachinery::pkg::apis::meta::v1::Condition;
}
use self::prelude::*;

/// spec represents the desired state of the Bundle resource.
#[derive(CustomResource, Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
#[kube(group = "trust.cert-manager.io", version = "v1alpha1", kind = "Bundle", plural = "bundles")]
#[kube(status = "BundleStatus")]
#[kube(schema = "disabled")]
#[kube(derive="Default")]
#[kube(derive="PartialEq")]
pub struct BundleSpec {
    /// sources is a set of references to data whose data will sync to the target.
    pub sources: Vec<BundleSources>,
    /// target is the target location in all namespaces to sync source data to.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub target: Option<BundleTarget>,
}

/// BundleSource is the set of sources whose data will be appended and synced to
/// the BundleTarget in all Namespaces.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSources {
    /// configMap is a reference (by name) to a ConfigMap's `data` key(s), or to a
    /// list of ConfigMap's `data` key(s) using label selector, in the trust namespace.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "configMap")]
    pub config_map: Option<BundleSourcesConfigMap>,
    /// inLine is a simple string to append as the source data.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "inLine")]
    pub in_line: Option<String>,
    /// secret is a reference (by name) to a Secret's `data` key(s), or to a
    /// list of Secret's `data` key(s) using label selector, in the trust namespace.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub secret: Option<BundleSourcesSecret>,
    /// useDefaultCAs indicates whether the default CA bundle should be used as a source.
    /// The default CA bundle is available only if trust-manager was installed with
    /// default CA support enabled, either via the Helm chart or by starting the
    /// trust-manager controller with the "--default-package-location" flag.
    /// If default CA support was not enabled at startup, setting this field to true
    /// will result in reconciliation failure.
    /// The version of the default CA package used for this Bundle is reported in
    /// status.defaultCAVersion.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "useDefaultCAs")]
    pub use_default_c_as: Option<bool>,
}

/// configMap is a reference (by name) to a ConfigMap's `data` key(s), or to a
/// list of ConfigMap's `data` key(s) using label selector, in the trust namespace.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesConfigMap {
    /// includeAllKeys is a flag to include all keys in the object's `data` field to be used. False by default.
    /// This field must not be true when `key` is set.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "includeAllKeys")]
    pub include_all_keys: Option<bool>,
    /// key of the entry in the object's `data` field to be used.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub key: Option<String>,
    /// name is the name of the source object in the trust namespace.
    /// This field must be left empty when `selector` is set
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    /// selector is the label selector to use to fetch a list of objects. Must not be set
    /// when `name` is set.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub selector: Option<BundleSourcesConfigMapSelector>,
}

/// selector is the label selector to use to fetch a list of objects. Must not be set
/// when `name` is set.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesConfigMapSelector {
    /// matchExpressions is a list of label selector requirements. The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchExpressions")]
    pub match_expressions: Option<Vec<BundleSourcesConfigMapSelectorMatchExpressions>>,
    /// matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
    /// map is equivalent to an element of matchExpressions, whose key field is "key", the
    /// operator is "In", and the values array contains only "value". The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchLabels")]
    pub match_labels: Option<BTreeMap<String, String>>,
}

/// A label selector requirement is a selector that contains values, a key, and an operator that
/// relates the key and values.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesConfigMapSelectorMatchExpressions {
    /// key is the label key that the selector applies to.
    pub key: String,
    /// operator represents a key's relationship to a set of values.
    /// Valid operators are In, NotIn, Exists and DoesNotExist.
    pub operator: String,
    /// values is an array of string values. If the operator is In or NotIn,
    /// the values array must be non-empty. If the operator is Exists or DoesNotExist,
    /// the values array must be empty. This array is replaced during a strategic
    /// merge patch.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub values: Option<Vec<String>>,
}

/// secret is a reference (by name) to a Secret's `data` key(s), or to a
/// list of Secret's `data` key(s) using label selector, in the trust namespace.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesSecret {
    /// includeAllKeys is a flag to include all keys in the object's `data` field to be used. False by default.
    /// This field must not be true when `key` is set.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "includeAllKeys")]
    pub include_all_keys: Option<bool>,
    /// key of the entry in the object's `data` field to be used.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub key: Option<String>,
    /// name is the name of the source object in the trust namespace.
    /// This field must be left empty when `selector` is set
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    /// selector is the label selector to use to fetch a list of objects. Must not be set
    /// when `name` is set.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub selector: Option<BundleSourcesSecretSelector>,
}

/// selector is the label selector to use to fetch a list of objects. Must not be set
/// when `name` is set.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesSecretSelector {
    /// matchExpressions is a list of label selector requirements. The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchExpressions")]
    pub match_expressions: Option<Vec<BundleSourcesSecretSelectorMatchExpressions>>,
    /// matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
    /// map is equivalent to an element of matchExpressions, whose key field is "key", the
    /// operator is "In", and the values array contains only "value". The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchLabels")]
    pub match_labels: Option<BTreeMap<String, String>>,
}

/// A label selector requirement is a selector that contains values, a key, and an operator that
/// relates the key and values.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleSourcesSecretSelectorMatchExpressions {
    /// key is the label key that the selector applies to.
    pub key: String,
    /// operator represents a key's relationship to a set of values.
    /// Valid operators are In, NotIn, Exists and DoesNotExist.
    pub operator: String,
    /// values is an array of string values. If the operator is In or NotIn,
    /// the values array must be non-empty. If the operator is Exists or DoesNotExist,
    /// the values array must be empty. This array is replaced during a strategic
    /// merge patch.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub values: Option<Vec<String>>,
}

/// target is the target location in all namespaces to sync source data to.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTarget {
    /// additionalFormats specifies any additional formats to write to the target
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "additionalFormats")]
    pub additional_formats: Option<BundleTargetAdditionalFormats>,
    /// configMap is the target ConfigMap in Namespaces that all Bundle source
    /// data will be synced to.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "configMap")]
    pub config_map: Option<BundleTargetConfigMap>,
    /// namespaceSelector will, if set, only sync the target resource in
    /// Namespaces which match the selector.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "namespaceSelector")]
    pub namespace_selector: Option<BundleTargetNamespaceSelector>,
    /// secret is the target Secret that all Bundle source data will be synced to.
    /// Using Secrets as targets is only supported if enabled at trust-manager startup.
    /// By default, trust-manager has no permissions for writing to secrets and can only read secrets in the trust namespace.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub secret: Option<BundleTargetSecret>,
}

/// additionalFormats specifies any additional formats to write to the target
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetAdditionalFormats {
    /// jks requests a JKS-formatted binary trust bundle to be written to the target.
    /// The bundle has "changeit" as the default password.
    /// For more information refer to this link <https://cert-manager.io/docs/faq/#keystore-passwords>
    /// Format is deprecated: Writing JKS is subject for removal. Please migrate to PKCS12.
    /// PKCS#12 trust stores created by trust-manager are compatible with Java.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub jks: Option<BundleTargetAdditionalFormatsJks>,
    /// pkcs12 requests a PKCS12-formatted binary trust bundle to be written to the target.
    /// 
    /// The bundle is by default created without a password.
    /// For more information refer to this link <https://cert-manager.io/docs/faq/#keystore-passwords>
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub pkcs12: Option<BundleTargetAdditionalFormatsPkcs12>,
}

/// jks requests a JKS-formatted binary trust bundle to be written to the target.
/// The bundle has "changeit" as the default password.
/// For more information refer to this link <https://cert-manager.io/docs/faq/#keystore-passwords>
/// Format is deprecated: Writing JKS is subject for removal. Please migrate to PKCS12.
/// PKCS#12 trust stores created by trust-manager are compatible with Java.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetAdditionalFormatsJks {
    /// key is the key of the entry in the object's `data` field to be used.
    pub key: String,
    /// password for JKS trust store
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub password: Option<String>,
}

/// pkcs12 requests a PKCS12-formatted binary trust bundle to be written to the target.
/// 
/// The bundle is by default created without a password.
/// For more information refer to this link <https://cert-manager.io/docs/faq/#keystore-passwords>
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetAdditionalFormatsPkcs12 {
    /// key is the key of the entry in the object's `data` field to be used.
    pub key: String,
    /// password for PKCS12 trust store
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub password: Option<String>,
    /// profile specifies the certificate encryption algorithms and the HMAC algorithm
    /// used to create the PKCS12 trust store.
    /// 
    /// If provided, allowed values are:
    /// `LegacyRC2`: Deprecated. Not supported by default in OpenSSL 3 or Java 20.
    /// `LegacyDES`: Less secure algorithm. Use this option for maximal compatibility.
    /// `Modern2023`: Secure algorithm. Use this option in case you have to always use secure algorithms (e.g. because of company policy).
    /// 
    /// Default value is `LegacyRC2` for backward compatibility.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub profile: Option<BundleTargetAdditionalFormatsPkcs12Profile>,
}

/// pkcs12 requests a PKCS12-formatted binary trust bundle to be written to the target.
/// 
/// The bundle is by default created without a password.
/// For more information refer to this link <https://cert-manager.io/docs/faq/#keystore-passwords>
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
pub enum BundleTargetAdditionalFormatsPkcs12Profile {
    #[serde(rename = "LegacyRC2")]
    LegacyRc2,
    #[serde(rename = "LegacyDES")]
    LegacyDes,
    Modern2023,
}

/// configMap is the target ConfigMap in Namespaces that all Bundle source
/// data will be synced to.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetConfigMap {
    /// key is the key of the entry in the object's `data` field to be used.
    pub key: String,
    /// metadata is an optional set of labels and annotations to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub metadata: Option<BundleTargetConfigMapMetadata>,
}

/// metadata is an optional set of labels and annotations to be copied to the target.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetConfigMapMetadata {
    /// annotations is a key value map to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub annotations: Option<BTreeMap<String, String>>,
    /// labels is a key value map to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub labels: Option<BTreeMap<String, String>>,
}

/// namespaceSelector will, if set, only sync the target resource in
/// Namespaces which match the selector.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetNamespaceSelector {
    /// matchExpressions is a list of label selector requirements. The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchExpressions")]
    pub match_expressions: Option<Vec<BundleTargetNamespaceSelectorMatchExpressions>>,
    /// matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
    /// map is equivalent to an element of matchExpressions, whose key field is "key", the
    /// operator is "In", and the values array contains only "value". The requirements are ANDed.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "matchLabels")]
    pub match_labels: Option<BTreeMap<String, String>>,
}

/// A label selector requirement is a selector that contains values, a key, and an operator that
/// relates the key and values.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetNamespaceSelectorMatchExpressions {
    /// key is the label key that the selector applies to.
    pub key: String,
    /// operator represents a key's relationship to a set of values.
    /// Valid operators are In, NotIn, Exists and DoesNotExist.
    pub operator: String,
    /// values is an array of string values. If the operator is In or NotIn,
    /// the values array must be non-empty. If the operator is Exists or DoesNotExist,
    /// the values array must be empty. This array is replaced during a strategic
    /// merge patch.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub values: Option<Vec<String>>,
}

/// secret is the target Secret that all Bundle source data will be synced to.
/// Using Secrets as targets is only supported if enabled at trust-manager startup.
/// By default, trust-manager has no permissions for writing to secrets and can only read secrets in the trust namespace.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetSecret {
    /// key is the key of the entry in the object's `data` field to be used.
    pub key: String,
    /// metadata is an optional set of labels and annotations to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub metadata: Option<BundleTargetSecretMetadata>,
}

/// metadata is an optional set of labels and annotations to be copied to the target.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleTargetSecretMetadata {
    /// annotations is a key value map to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub annotations: Option<BTreeMap<String, String>>,
    /// labels is a key value map to be copied to the target.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub labels: Option<BTreeMap<String, String>>,
}

/// status of the Bundle. This is set and managed automatically.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BundleStatus {
    /// conditions represent the latest available observations of the Bundle's current state.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub conditions: Option<Vec<Condition>>,
    /// defaultCAVersion is the version of the default CA package used when resolving
    /// the default CA source(s) for this Bundle (for example, when any source has
    /// useDefaultCAs set to true), if applicable.
    /// Bundles resolved from identical sets of default CA certificates will report
    /// the same defaultCAVersion value.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "defaultCAVersion")]
    pub default_ca_version: Option<String>,
}

