// WARNING: generated by kopium - manual changes will be overwritten
// kopium command: kopium --docs --filename=./crd-catalog/aws-controllers-k8s/mq-controller/mq.services.k8s.aws/v1alpha1/brokers.yaml --derive=Default --derive=PartialEq --smart-derive-elision
// kopium version: 0.21.2

#[allow(unused_imports)]
mod prelude {
    pub use kube::CustomResource;
    pub use serde::{Serialize, Deserialize};
    pub use std::collections::BTreeMap;
    pub use k8s_openapi::apimachinery::pkg::apis::meta::v1::Condition;
}
use self::prelude::*;

/// BrokerSpec defines the desired state of Broker.
#[derive(CustomResource, Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
#[kube(group = "mq.services.k8s.aws", version = "v1alpha1", kind = "Broker", plural = "brokers")]
#[kube(namespaced)]
#[kube(status = "BrokerStatus")]
#[kube(schema = "disabled")]
#[kube(derive="Default")]
#[kube(derive="PartialEq")]
pub struct BrokerSpec {
    /// Optional. The authentication strategy used to secure the broker. The default
    /// is SIMPLE.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "authenticationStrategy")]
    pub authentication_strategy: Option<String>,
    /// Enables automatic upgrades to new patch versions for brokers as new versions
    /// are released and supported by Amazon MQ. Automatic upgrades occur during
    /// the scheduled maintenance window or after a manual broker reboot. Set to
    /// true by default, if no value is specified.
    /// 
    /// Must be set to true for ActiveMQ brokers version 5.18 and above and for RabbitMQ
    /// brokers version 3.13 and above.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "autoMinorVersionUpgrade")]
    pub auto_minor_version_upgrade: Option<bool>,
    /// A list of information about the configuration.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub configuration: Option<BrokerConfiguration>,
    /// The unique ID that the requester receives for the created broker. Amazon
    /// MQ passes your ID with the API action.
    /// 
    /// We recommend using a Universally Unique Identifier (UUID) for the creatorRequestId.
    /// You may omit the creatorRequestId if your application doesn't require idempotency.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "creatorRequestID")]
    pub creator_request_id: Option<String>,
    /// Required. The broker's deployment mode.
    #[serde(rename = "deploymentMode")]
    pub deployment_mode: String,
    /// Encryption options for the broker.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "encryptionOptions")]
    pub encryption_options: Option<BrokerEncryptionOptions>,
    /// Required. The type of broker engine. Currently, Amazon MQ supports ACTIVEMQ
    /// and RABBITMQ.
    #[serde(rename = "engineType")]
    pub engine_type: String,
    /// The broker engine version. Defaults to the latest available version for the
    /// specified broker engine type. For more information, see the ActiveMQ version
    /// management (https://docs.aws.amazon.com//amazon-mq/latest/developer-guide/activemq-version-management.html)
    /// and the RabbitMQ version management (https://docs.aws.amazon.com//amazon-mq/latest/developer-guide/rabbitmq-version-management.html)
    /// sections in the Amazon MQ Developer Guide.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "engineVersion")]
    pub engine_version: Option<String>,
    /// Required. The broker's instance type.
    #[serde(rename = "hostInstanceType")]
    pub host_instance_type: String,
    /// Optional. The metadata of the LDAP server used to authenticate and authorize
    /// connections to the broker. Does not apply to RabbitMQ brokers.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "ldapServerMetadata")]
    pub ldap_server_metadata: Option<BrokerLdapServerMetadata>,
    /// Enables Amazon CloudWatch logging for brokers.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub logs: Option<BrokerLogs>,
    /// The parameters that determine the WeeklyStartTime.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "maintenanceWindowStartTime")]
    pub maintenance_window_start_time: Option<BrokerMaintenanceWindowStartTime>,
    /// Required. The broker's name. This value must be unique in your Amazon Web
    /// Services account, 1-50 characters long, must contain only letters, numbers,
    /// dashes, and underscores, and must not contain white spaces, brackets, wildcard
    /// characters, or special characters.
    /// 
    /// Do not add personally identifiable information (PII) or other confidential
    /// or sensitive information in broker names. Broker names are accessible to
    /// other Amazon Web Services services, including CloudWatch Logs. Broker names
    /// are not intended to be used for private or sensitive data.
    pub name: String,
    /// Enables connections from applications outside of the VPC that hosts the broker's
    /// subnets. Set to false by default, if no value is provided.
    #[serde(rename = "publiclyAccessible")]
    pub publicly_accessible: bool,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "securityGroupRefs")]
    pub security_group_refs: Option<Vec<BrokerSecurityGroupRefs>>,
    /// The list of rules (1 minimum, 125 maximum) that authorize connections to
    /// brokers.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "securityGroups")]
    pub security_groups: Option<Vec<String>>,
    /// The broker's storage type.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "storageType")]
    pub storage_type: Option<String>,
    /// The list of groups that define which subnets and IP ranges the broker can
    /// use from different Availability Zones. If you specify more than one subnet,
    /// the subnets must be in different Availability Zones. Amazon MQ will not be
    /// able to create VPC endpoints for your broker with multiple subnets in the
    /// same Availability Zone. A SINGLE_INSTANCE deployment requires one subnet
    /// (for example, the default subnet). An ACTIVE_STANDBY_MULTI_AZ Amazon MQ for
    /// ActiveMQ deployment requires two subnets. A CLUSTER_MULTI_AZ Amazon MQ for
    /// RabbitMQ deployment has no subnet requirements when deployed with public
    /// accessibility. Deployment without public accessibility requires at least
    /// one subnet.
    /// 
    /// If you specify subnets in a shared VPC (https://docs.aws.amazon.com/vpc/latest/userguide/vpc-sharing.html)
    /// for a RabbitMQ broker, the associated VPC to which the specified subnets
    /// belong must be owned by your Amazon Web Services account. Amazon MQ will
    /// not be able to create VPC endpoints in VPCs that are not owned by your Amazon
    /// Web Services account.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "subnetIDs")]
    pub subnet_i_ds: Option<Vec<String>>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "subnetRefs")]
    pub subnet_refs: Option<Vec<BrokerSubnetRefs>>,
    /// Create tags when creating the broker.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub tags: Option<BTreeMap<String, String>>,
    /// The list of broker users (persons or applications) who can access queues
    /// and topics. For Amazon MQ for RabbitMQ brokers, one and only one administrative
    /// user is accepted and created when a broker is first provisioned. All subsequent
    /// broker users are created by making RabbitMQ API calls directly to brokers
    /// or via the RabbitMQ web console.
    pub users: Vec<BrokerUsers>,
}

/// A list of information about the configuration.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerConfiguration {
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub id: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub revision: Option<i64>,
}

/// Encryption options for the broker.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerEncryptionOptions {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "kmsKeyID")]
    pub kms_key_id: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "useAWSOwnedKey")]
    pub use_aws_owned_key: Option<bool>,
}

/// Optional. The metadata of the LDAP server used to authenticate and authorize
/// connections to the broker. Does not apply to RabbitMQ brokers.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerLdapServerMetadata {
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub hosts: Option<Vec<String>>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "roleBase")]
    pub role_base: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "roleName")]
    pub role_name: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "roleSearchMatching")]
    pub role_search_matching: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "roleSearchSubtree")]
    pub role_search_subtree: Option<bool>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "serviceAccountPassword")]
    pub service_account_password: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "serviceAccountUsername")]
    pub service_account_username: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "userBase")]
    pub user_base: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "userRoleName")]
    pub user_role_name: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "userSearchMatching")]
    pub user_search_matching: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "userSearchSubtree")]
    pub user_search_subtree: Option<bool>,
}

/// Enables Amazon CloudWatch logging for brokers.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerLogs {
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub audit: Option<bool>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub general: Option<bool>,
}

/// The parameters that determine the WeeklyStartTime.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerMaintenanceWindowStartTime {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "dayOfWeek")]
    pub day_of_week: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "timeOfDay")]
    pub time_of_day: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "timeZone")]
    pub time_zone: Option<String>,
}

/// AWSResourceReferenceWrapper provides a wrapper around *AWSResourceReference
/// type to provide more user friendly syntax for references using 'from' field
/// Ex:
/// APIIDRef:
/// 
/// 	from:
/// 	  name: my-api
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerSecurityGroupRefs {
    /// AWSResourceReference provides all the values necessary to reference another
    /// k8s resource for finding the identifier(Id/ARN/Name)
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub from: Option<BrokerSecurityGroupRefsFrom>,
}

/// AWSResourceReference provides all the values necessary to reference another
/// k8s resource for finding the identifier(Id/ARN/Name)
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerSecurityGroupRefsFrom {
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub namespace: Option<String>,
}

/// AWSResourceReferenceWrapper provides a wrapper around *AWSResourceReference
/// type to provide more user friendly syntax for references using 'from' field
/// Ex:
/// APIIDRef:
/// 
/// 	from:
/// 	  name: my-api
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerSubnetRefs {
    /// AWSResourceReference provides all the values necessary to reference another
    /// k8s resource for finding the identifier(Id/ARN/Name)
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub from: Option<BrokerSubnetRefsFrom>,
}

/// AWSResourceReference provides all the values necessary to reference another
/// k8s resource for finding the identifier(Id/ARN/Name)
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerSubnetRefsFrom {
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub namespace: Option<String>,
}

/// A user associated with the broker. For Amazon MQ for RabbitMQ brokers, one
/// and only one administrative user is accepted and created when a broker is
/// first provisioned. All subsequent broker users are created by making RabbitMQ
/// API calls directly to brokers or via the RabbitMQ web console.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerUsers {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "consoleAccess")]
    pub console_access: Option<bool>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub groups: Option<Vec<String>>,
    /// SecretKeyReference combines a k8s corev1.SecretReference with a
    /// specific key within the referred-to Secret
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub password: Option<BrokerUsersPassword>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub username: Option<String>,
}

/// SecretKeyReference combines a k8s corev1.SecretReference with a
/// specific key within the referred-to Secret
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerUsersPassword {
    /// Key is the key within the secret
    pub key: String,
    /// name is unique within a namespace to reference a secret resource.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub name: Option<String>,
    /// namespace defines the space within which the secret name must be unique.
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub namespace: Option<String>,
}

/// BrokerStatus defines the observed state of Broker
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerStatus {
    /// All CRs managed by ACK have a common `Status.ACKResourceMetadata` member
    /// that is used to contain resource sync state, account ownership,
    /// constructed ARN for the resource
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "ackResourceMetadata")]
    pub ack_resource_metadata: Option<BrokerStatusAckResourceMetadata>,
    /// The unique ID that Amazon MQ generates for the broker.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "brokerID")]
    pub broker_id: Option<String>,
    /// A list of information about allocated brokers.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "brokerInstances")]
    pub broker_instances: Option<Vec<BrokerStatusBrokerInstances>>,
    /// The broker's status.
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "brokerState")]
    pub broker_state: Option<String>,
    /// All CRs managed by ACK have a common `Status.Conditions` member that
    /// contains a collection of `ackv1alpha1.Condition` objects that describe
    /// the various terminal states of the CR and its backend AWS service API
    /// resource
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub conditions: Option<Vec<Condition>>,
}

/// All CRs managed by ACK have a common `Status.ACKResourceMetadata` member
/// that is used to contain resource sync state, account ownership,
/// constructed ARN for the resource
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerStatusAckResourceMetadata {
    /// ARN is the Amazon Resource Name for the resource. This is a
    /// globally-unique identifier and is set only by the ACK service controller
    /// once the controller has orchestrated the creation of the resource OR
    /// when it has verified that an "adopted" resource (a resource where the
    /// ARN annotation was set by the Kubernetes user on the CR) exists and
    /// matches the supplied CR's Spec field values.
    /// https://github.com/aws/aws-controllers-k8s/issues/270
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub arn: Option<String>,
    /// OwnerAccountID is the AWS Account ID of the account that owns the
    /// backend AWS service API resource.
    #[serde(rename = "ownerAccountID")]
    pub owner_account_id: String,
    /// Region is the AWS region in which the resource exists or will exist.
    pub region: String,
}

/// Returns information about all brokers.
#[derive(Serialize, Deserialize, Clone, Debug, Default, PartialEq)]
pub struct BrokerStatusBrokerInstances {
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "consoleURL")]
    pub console_url: Option<String>,
    #[serde(default, skip_serializing_if = "Option::is_none")]
    pub endpoints: Option<Vec<String>>,
    #[serde(default, skip_serializing_if = "Option::is_none", rename = "ipAddress")]
    pub ip_address: Option<String>,
}

